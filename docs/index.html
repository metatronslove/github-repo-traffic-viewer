<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Depo Trafik G√∂r√ºnt√ºleyici</title>
    <!-- Chart.js 3.9.1 s√ºr√ºm√º -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #24292e;
            --border-color: #e1e4e8;
            --primary-color: #0366d6;
            --secondary-bg: #f6f8fa;
            --error-bg: #ffdce0;
            --error-text: #cb2431;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #0d1117;
                --text-color: #c9d1d9;
                --border-color: #30363d;
                --primary-color: #58a6ff;
                --secondary-bg: #161b22;
                --error-bg: #490202;
                --error-text: #ff7b72;
            }
        }

        [data-theme="dark"] {
            --bg-color: #0d1117;
            --text-color: #c9d1d9;
            --border-color: #30363d;
            --primary-color: #58a6ff;
            --secondary-bg: #161b22;
            --error-bg: #490202;
            --error-text: #ff7b72;
        }

        [data-theme="light"] {
            --bg-color: #ffffff;
            --text-color: #24292e;
            --border-color: #e1e4e8;
            --primary-color: #0366d6;
            --secondary-bg: #f6f8fa;
            --error-bg: #ffdce0;
            --error-text: #cb2431;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        h1 { color: var(--primary-color); }
        
        .chart-box {
            margin: 30px 0;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
        }
        
        .info-box {
            padding: 15px;
            background-color: var(--secondary-bg);
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        #loading {
            text-align: center;
            padding: 20px;
            font-style: italic;
            color: var(--text-color);
            opacity: 0.8;
        }
        
        .error {
            color: var(--error-text);
            background-color: var(--error-bg);
            padding: 10px;
            border-radius: 6px;
        }
        
        .repo-name {
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }
        
        .pagination button {
            padding: 5px 10px;
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
        }
        
        .pagination button.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .per-page-selector {
            margin: 10px 0;
            text-align: center;
        }
        
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 5px;
        }
        
        .lang-btn {
            padding: 3px 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            color: var(--text-color);            
            background: var(--secondary-bg);
        }
        
        .lang-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .chart-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
        }
        
        .chart-container {
            flex: 1;
            min-width: 300px;
            position: relative;
            height: 300px;
        }
        
        canvas {
            width: 100% !important;
            height: 100% !important;
        }
        
        .time-range-selector {
            margin: 15px 0;
            text-align: center;
        }
        
        .stats-summary {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
            padding: 12px;
            background: var(--secondary-bg);
            border-radius: 8px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: var(--bg-color);
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="language-switcher">
        <button class="lang-btn" onclick="changeLanguage('tr')">TR</button>
        <button class="lang-btn" onclick="changeLanguage('en')">EN</button>
        <button class="lang-btn" onclick="toggleTheme()" style="margin-left: 10px;">
            <span data-theme-icon="dark">üåô</span>
            <span data-theme-icon="light">‚òÄÔ∏è</span>
        </button>
    </div>
    
    <div class="time-range-selector" id="time-range-container" style="display:none;">
        <label data-translate="timeRange">
            Zaman Aralƒ±ƒüƒ±:
            <select id="time-range">
                <option value="1d">Son 1 G√ºn</option>
                <option value="7d">Son 1 Hafta</option>
                <option value="30d" selected>Son 1 Ay</option>
                <option value="90d">Son 3 Ay</option>
                <option value="180d">Son 6 Ay</option>
                <option value="365d">Son 1 Yƒ±l</option>
                <option value="all">T√ºm Zamanlar</option>
            </select>
        </label>
    </div>
    
    <h1 data-translate="title">GitHub Depo Trafik Verileri</h1>
    <div id="info-container"></div>
    <div id="loading">GitHub oturumunuz kontrol ediliyor...</div>
    
    <div class="per-page-selector" id="per-page-container" style="display:none;">
		<label data-translate="perPage">
            <select id="per-page">
                <option value="10">10</option>
                <option value="25" selected>25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </label>
    </div>
    
    <div id="charts-container"></div>
    <div class="pagination" id="pagination" style="display:none;"></div>

    <script>
        // 1. Tema Y√∂netimi
        function detectSystemTheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            updateChartColors();
        }

        function toggleTheme() {
            const current = localStorage.getItem('theme') || detectSystemTheme();
            const newTheme = current === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        }

        function updateChartColors() {
            const textColor = getComputedStyle(document.body).getPropertyValue('--text-color');
            const primaryColor = getComputedStyle(document.body).getPropertyValue('--primary-color');

            // Get all active charts from the Chart instances
            Object.keys(Chart.instances).forEach(key => {
                const chart = Chart.instances[key];
                if (chart && !chart._destroyed) {
                    chart.options.scales.x.ticks.color = textColor;
                    chart.options.scales.y.ticks.color = textColor;
                    chart.options.scales.x.grid.color = `${textColor}10`;
                    chart.options.scales.y.grid.color = `${textColor}20`;
                    chart.data.datasets[0].borderColor = primaryColor;
                    chart.data.datasets[0].backgroundColor = `${primaryColor}20`;
                    chart.update();
                }
            });
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const systemTheme = detectSystemTheme();
            setTheme(savedTheme || systemTheme);
            
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (!localStorage.getItem('theme')) {
                    setTheme(e.matches ? 'dark' : 'light');
                }
            });
        }

        // 2. Dil Y√∂netimi
        const translations = {
            tr: {
                title: "GitHub Depo Trafik Verileri",
                loadingAuth: "GitHub oturumunuz kontrol ediliyor...",
                loadingRepos: (loaded) => `Depo listesi alƒ±nƒ±yor (${loaded} y√ºklendi)...`,
                totalRepos: (count) => `Toplam depo: ${count}`,
                perPage: `Sayfa ba≈üƒ±na depo sayƒ±sƒ±:
            <select id="per-page">
                <option value="10">10</option>
                <option value="25" selected>25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>            
                `,
                pageStats: (current, total, count) => `Sayfa ${current}/${total} | Toplam ${count} depo`,
                repoHeader: (name) => `<span class="repo-name">${name}</span> deposu`,
                views: "G√∂r√ºnt√ºlenmeler",
                clones: "Klonlamalar",
                errorAuth: "L√ºtfen GitHub'da oturum a√ßƒ±n",
                errorApiLimit: "API limiti a≈üƒ±ldƒ±, birka√ß dakika sonra tekrar deneyin",
                infoBox: `
                    <h3>üöÄ Kendi GitHub Trafik Verilerinizi G√∂r√ºn</h3>
                    <p>Bu sayfa sadece <strong>fork yapan kullanƒ±cƒ±nƒ±n</strong> kendi depo trafik verilerini g√∂sterir.</p>
                    <ol>
                        <li>Saƒü √ºstteki "Fork" butonuna basarak bu depoyu kendi hesabƒ±nƒ±za kopyalayƒ±n</li>
                        <li>GitHub Pages ayarlarƒ±ndan <code>docs</code> klas√∂r√ºn√º yayƒ±na alƒ±n</li>
                        <li>Olu≈üan sayfada <strong>kendi depo trafik verileriniz</strong> g√∂r√ºnecektir</li>
                    </ol>
                `,
                previousPage: '&laquo; √ñnceki',
                nextPage: 'Sonraki &raquo;',
                timeRange: `Zaman Aralƒ±ƒüƒ±:
            <select id="time-range">
                <option value="1d">Son 1 G√ºn</option>
                <option value="7d">Son 1 Hafta</option>
                <option value="30d" selected>Son 1 Ay</option>
                <option value="90d">Son 3 Ay</option>
                <option value="180d">Son 6 Ay</option>
                <option value="365d">Son 1 Yƒ±l</option>
                <option value="all">T√ºm Zamanlar</option>
            </select>
            `},
            en: {
                title: "GitHub Repository Traffic Stats",
                loadingAuth: "Checking GitHub session...",
                loadingRepos: (loaded) => `Loading repository list (${loaded} loaded)...`,
                totalRepos: (count) => `Total repositories: ${count}`,
                perPage: `Repositories per page:
            <select id="per-page">
                <option value="10">10</option>
                <option value="25" selected>25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
            `,
                pageStats: (current, total, count) => `Page ${current}/${total} | Total ${count} repos`,
                repoHeader: (name) => `<span class="repo-name">${name}</span> repository`,
                views: "Views",
                clones: "Clones",
                errorAuth: "Please log in to GitHub",
                errorApiLimit: "API rate limit exceeded, try again later",
                infoBox: `
                    <h3>üöÄ View Your GitHub Traffic Stats</h3>
                    <p>This page shows traffic stats only for the <strong>forking user's</strong> repositories.</p>
                    <ol>
                        <li>Click "Fork" button to copy this repo to your account</li>
                        <li>Enable GitHub Pages for the <code>docs</code> folder</li>
                        <li>You'll see your own repository traffic stats</li>
                    </ol>
                `,
                previousPage: '&laquo; Previous',
                nextPage: 'Next &raquo;',
                timeRange: `Time Range:
            <select id="time-range">
                <option value="1d">Last Day</option>
                <option value="7d">Last Week</option>
                <option value="30d" selected>Last Month</option>
                <option value="90d">Last 3 Months</option>
                <option value="180d">Last 6 Months</option>
                <option value="365d">Last Year</option>
                <option value="all">All Time</option>
            </select>
            `}
        };

        translations.tr.errorLoadingRepos = "Depo listesi y√ºklenemedi";
        translations.en.errorLoadingRepos = "Failed to load repository list";
        translations.tr.noData = "Veri bulunamadƒ±";
        translations.en.noData = "No data available";
        translations.tr.errorLoadingData = "Veri y√ºklenirken hata olu≈ütu";
        translations.en.errorLoadingData = "Error loading data";

        let currentLang = localStorage.getItem('lang') || 'tr';

        function updateAllTranslations() {
            document.querySelector('[data-translate="title"]').textContent = translations[currentLang].title;
            document.querySelector('[data-translate="timeRange"]').textContent = translations[currentLang].timeRange;
            
            if (document.getElementById('loading')) {
                document.getElementById('loading').textContent = translations[currentLang].loadingAuth;
            }
            
            const pagination = document.getElementById('pagination');
            if (pagination) {
                const prevBtn = pagination.querySelector('button:first-child');
                const nextBtn = pagination.querySelector('button:last-child');
                if (prevBtn) prevBtn.innerHTML = translations[currentLang].previousPage;
                if (nextBtn) nextBtn.innerHTML = translations[currentLang].nextPage;
            }
        }

        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('lang', lang);
            updateAllTranslations();
            document.getElementById('charts-container').innerHTML = '';
            currentPage = 1;
            displayRepos();
            
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === lang.toUpperCase());
            });
        }

        // 3. Veri Y√∂netimi
        let allRepos = [];
        let currentPage = 1;
        let reposPerPage = 25;
        let totalPages = 1;

        function getBasePath() {
            if (window.location.host.includes('github.io')) {
                const pathParts = window.location.pathname.split('/');
                return pathParts.slice(0, 3).join('/');
            }
            return '';
        }

        async function fetchTrafficData(repoName) {
            try {
                const basePath = getBasePath();
                
                const [viewsRes, clonesRes] = await Promise.all([
                    fetch(`${basePath}/data/repos/${encodeURIComponent(repoName)}/views.json`),
                    fetch(`${basePath}/data/repos/${encodeURIComponent(repoName)}/clones.json`)
                ]);
                
                if (!viewsRes.ok) {
                    console.warn(`Views data not found for ${repoName}`);
                    return { views: { views: [] } };
                }
                if (!clonesRes.ok) {
                    console.warn(`Clones data not found for ${repoName}`);
                    return { clones: { clones: [] } };
                }
                
                const views = await viewsRes.json();
                const clones = await clonesRes.json();
                
                const trafficData = {
                    views: views || { views: [] },
                    clones: clones || { clones: [] }
                };
                
                if (!validateTrafficData(trafficData)) {
                    throw new Error('Invalid data structure');
                }
                
                return trafficData;
            } catch (error) {
                console.error(`Error loading traffic data for ${repoName}:`, error);
                return {
                    views: { views: [] },
                    clones: { clones: [] }
                };
            }
        }

        async function fetchUserData() {
            return { login: "auto-generated" };
        }

        async function fetchAllRepos() {
            try {
                const basePath = getBasePath();
                const response = await fetch(`${basePath}/data/repo-info.json`);
                
                if (!response.ok) {
                    const absoluteUrl = `https://${window.location.host}${basePath}/data/repo-info.json`;
                    const fallbackResponse = await fetch(absoluteUrl);
                    if (!fallbackResponse.ok) throw new Error('Repository list not found');
                    return await fallbackResponse.json();
                }
                
                const data = await response.json();
                return Array.isArray(data) ? { repositories: data } : data;
            } catch (error) {
                console.error('Error loading repositories:', error);
                showInfoBox();
                return { repositories: [] };
            }
        }

        function validateTrafficData(data) {
            if (!data) return false;
            if (data.views && !Array.isArray(data.views.views)) return false;
            if (data.clones && !Array.isArray(data.clones.clones)) return false;
            return true;
        }

        function formatDate(isoString) {
            const date = new Date(isoString);
            return date.toLocaleDateString(currentLang, {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        function fillMissingDates(data, range) {
            if (data.length === 0) return data;

            const dateMap = new Map();
            data.forEach(item => dateMap.set(item.timestamp.split('T')[0], item));

            const sortedDates = [...dateMap.keys()].sort();
            const startDate = new Date(sortedDates[0]);
            const endDate = new Date(sortedDates[sortedDates.length - 1]);

            for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
                const dateStr = d.toISOString().split('T')[0];
                if (!dateMap.has(dateStr)) {
                    dateMap.set(dateStr, {
                        timestamp: dateStr,
                        count: 0,
                        uniques: 0
                    });
                }
            }

            return [...dateMap.values()].sort((a, b) => 
                new Date(a.timestamp) - new Date(b.timestamp)
            );
        }

        // 4. Grafik Y√∂netimi
        function createChart(canvasId, label, data, labels, total) {
            const ctx = document.getElementById(canvasId);
            if (!ctx) return;

            if (data.length === 0) {
                ctx.parentElement.innerHTML = `<p>${translations[currentLang].noData}</p>`;
                return;
            }

            const textColor = getComputedStyle(document.body).getPropertyValue('--text-color');
            const primaryColor = getComputedStyle(document.body).getPropertyValue('--primary-color');

            return new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: `${label} (Toplam: ${total || 0})`,
                        data: data,
                        borderColor: primaryColor,
                        backgroundColor: `${primaryColor}20`,
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: { 
                                color: textColor
                            }
                        }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true,
                            ticks: { color: textColor },
                            grid: { color: `${textColor}20` }
                        },
                        x: {
                            ticks: {
                                color: textColor,
                                maxRotation: 45,
                                minRotation: 45
                            },
                            grid: { color: `${textColor}10` }
                        }
                    }
                }
            });
        }

        // 5. UI Y√∂netimi
        function showError(messageKey) {
            const messages = {
                'L√ºtfen GitHub\'da oturum a√ßƒ±n': translations[currentLang].errorAuth,
                'API limiti a≈üƒ±ldƒ±, birka√ß dakika sonra tekrar deneyin': translations[currentLang].errorApiLimit
            };
            const message = messages[messageKey] || messageKey;
            
            const container = document.getElementById('charts-container');
            container.innerHTML = `<div class="error">${message}</div>`;
        }

        function showInfoBox() {
            const info = `
                <div class="info-box">
                    ${translations[currentLang].infoBox}
                </div>
            `;
            document.getElementById('info-container').innerHTML = info;
        }

        function setupPagination(totalRepos) {
            totalPages = Math.ceil(totalRepos / reposPerPage);
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            const prevButton = document.createElement('button');
            prevButton.innerHTML = translations[currentLang].previousPage;
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    displayRepos();
                }
            });
            paginationDiv.appendChild(prevButton);
            
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i;
                if (i === currentPage) {
                    pageButton.classList.add('active');
                }
                pageButton.addEventListener('click', () => {
                    currentPage = i;
                    displayRepos();
                });
                paginationDiv.appendChild(pageButton);
            }
            
            const nextButton = document.createElement('button');
            nextButton.innerHTML = translations[currentLang].nextPage;
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    displayRepos();
                }
            });
            paginationDiv.appendChild(nextButton);
            
            paginationDiv.style.display = 'flex';
        }

        function filterDataByDateRange(data, range) {
            if (range === 'all') return data;

            const days = parseInt(range) || 30;
            const cutoffDate = new Date();
            cutoffDate.setDate(cutoffDate.getDate() - days);

            return data.filter(item => {
                const itemDate = new Date(item.timestamp);
                return itemDate >= cutoffDate;
            });
        }

        // 6. Ana ƒ∞≈ülevler
        async function displayRepos() {
            if (!allRepos || !allRepos.repositories) {
                showError(translations[currentLang].errorLoadingRepos);
                return;
            }

            // Safe way to get time range value with fallback
            const getTimeRangeValue = () => {
                const selector = document.getElementById('time-range');
                return selector ? selector.value : '30d'; // Default to '30d' if not found
            };

            const selectedRange = getTimeRangeValue();

            const startIdx = (currentPage - 1) * reposPerPage;
            const endIdx = startIdx + reposPerPage;
            const reposToShow = allRepos.repositories.slice(startIdx, endIdx);

            document.getElementById('charts-container').innerHTML = '';
            document.getElementById('loading').textContent = translations[currentLang].loadingRepos(0);
    
            // Safely show UI elements if they exist
            const showElementIfExists = (id) => {
                const el = document.getElementById(id);
                el.style.display = 'block';
            };
    
            showElementIfExists('per-page-container');
            showElementIfExists('time-range-container');

            let loadedCount = 0;
            for (const repo of reposToShow) {
                document.getElementById('loading').textContent = 
                    translations[currentLang].loadingRepos(++loadedCount);

                const trafficData = await fetchTrafficData(repo.name);

                const filteredViews = filterDataByDateRange(trafficData.views.views, selectedRange);
                const filteredClones = filterDataByDateRange(trafficData.clones.clones, selectedRange);

                const completeViews = fillMissingDates(filteredViews, selectedRange);
                const completeClones = fillMissingDates(filteredClones, selectedRange);

                const container = document.createElement('div');
                container.className = 'chart-box';
                container.innerHTML = `
                    <h3>${translations[currentLang].repoHeader(repo.name)}</h3>
                    <div class="stats-summary">
                        <div class="stat-item">
                            <span class="stat-label">${translations[currentLang].views}:</span>
                            <span class="stat-value">${trafficData.views.count || 0}</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">${translations[currentLang].clones}:</span>
                            <span class="stat-value">${trafficData.clones.count || 0}</span>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="chart-container">
                            <canvas id="views-${repo.name}"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="clones-${repo.name}"></canvas>
                        </div>
                    </div>
                `;
                document.getElementById('charts-container').appendChild(container);

                createChart(
                    `views-${repo.name}`,
                    translations[currentLang].views,
                    completeViews.map(v => v.count),
                    completeViews.map(v => formatDate(v.timestamp)),
                    trafficData.views.count
                );

                createChart(
                    `clones-${repo.name}`,
                    translations[currentLang].clones,
                    completeClones.map(c => c.count),
                    completeClones.map(c => formatDate(c.timestamp)),
                    trafficData.clones.count
                );
            }

            document.getElementById('pagination').style.display = 'flex';
            document.getElementById('loading').textContent = 
                translations[currentLang].pageStats(currentPage, totalPages, allRepos.repositories.length);
            setupPagination(allRepos.repositories.length);
        }

        async function main() {
            try {
                initTheme();
                updateAllTranslations();
            
                allRepos = await fetchAllRepos();
                if (!allRepos.repositories || allRepos.repositories.length === 0) {
                    showInfoBox();
                    return;
                }
            
                displayRepos();
            } catch (error) {
                console.error('Main function error:', error);
                showError(translations[currentLang].errorLoadingData);
            }
        }

        // Ba≈ülatma
        window.addEventListener('DOMContentLoaded', () => {
            // Initialize language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === currentLang.toUpperCase());
            });
    
            // Initialize time range selector
            const timeRangeSelect = document.getElementById('time-range');
            if (timeRangeSelect) {
                timeRangeSelect.addEventListener('change', displayRepos);
            } else {
                console.warn('Time range selector not found');
            }
    
            // Initialize per-page selector
            const perPageSelect = document.getElementById('per-page');
            if (perPageSelect) {
                perPageSelect.addEventListener('change', (e) => {
                    reposPerPage = parseInt(e.target.value) || 25;
                    currentPage = 1;
                    displayRepos();
                });
            } else {
                console.warn('Per page selector not found');
            }
    
            // Start the main application
            main();
        });
    </script>
    <center><p></p><p><img src="https://img.shields.io/badge/HTML5-E34F26?style=flat&logo=html5&logoColor=white" title="attributes are great">&nbsp;<img src="https://img.shields.io/badge/CSS3-1572B6?style=flat&logo=css3&logoColor=white" title="style is more than make up">&nbsp;<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=flat&logo=javascript&logoColor=black" title="live Frenkanstein!"></p><p><a href="http://one.fanclub.rocks/" target="_blank" style="display: inline-flex; align-items: center; padding: 8px 16px; background: linear-gradient(135deg, #ff3366, #ff6633); color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 600; font-size: 15px; text-decoration: none; border-radius: 6px; box-shadow: 0 3px 6px rgba(0,0,0,0.16); transition: all 0.3s ease; letter-spacing: 0.5px;"><svg style="width: 16px; height: 16px; margin-right: 8px; fill: white;" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0 16H5V4h14v14zM7 6h10v2H7zm0 4h10v2H7zm0 4h7v2H7z"/></svg>One Blog</a><style>a:hover {transform: translateY(-2px);box-shadow: 0 5px 10px rgba(0,0,0,0.2);opacity: 0.9;}</style></p></center>
</body>
</html>